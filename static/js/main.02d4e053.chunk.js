(this.webpackJsonpstonks=this.webpackJsonpstonks||[]).push([[0],{256:function(e,t,n){"use strict";n.r(t);var r,a,c,o,i,s,u,d,l=n(1),b=n.n(l),f=n(29),j=n.n(f),O=(n(210),n(12)),v=n(272),h=n(10),p=n(3),x={symbol:"",stockData:[{}]},g=function(e,t){var n=t||{},r=n.type,a=n.payload;switch(r){case"LOAD_STOCK":var c=a||{},o=c.symbol,i=c.stockData;return Object(h.a)(Object(h.a)({},e),{},{symbol:o,stockData:i});case"RESET_CONTEXT":return x;default:throw new Error("Invalid action")}},m=Object(l.createContext)(),w=Object(l.createContext)(),E=function(e){var t=e.children,n=Object(l.useReducer)(g,x),r=Object(O.a)(n,2),a=r[0],c=r[1];return Object(p.jsx)(m.Provider,{value:a,children:Object(p.jsx)(w.Provider,{value:c,children:t})})},y={primary:"#19b3ff",secondary:"#148fcc",chart:{price:"steelblue",average:"orange",gain:"#03a678",lose:"#c0392b"},bg:"#ffffff",text:"#171818"},_=Object(h.a)(Object(h.a)({},y),{},{bg:"#222222",text:"#eff1f2"}),k=function(e,t){switch((t||{}).type){case"DARK_MODE":return _;case"RESET_CONTEXT":return y;default:throw new Error("Invalid action")}},C=Object(l.createContext)(),T=Object(l.createContext)(),A=function(e){var t=e.children,n=Object(l.useReducer)(k,y),r=Object(O.a)(n,2),a=r[0],c=r[1];return Object(p.jsx)(C.Provider,{value:a,children:Object(p.jsx)(T.Provider,{value:c,children:t})})},S=function(e){var t=e.children;return Object(p.jsx)(A,{children:Object(p.jsx)(E,{children:t})})},P=n(261),R=n(262),D=n(263),N=n(264),I=n(257),M=n(258),H=n(259),K=n(31),L=n.n(K),F=n(15),W=n(16),B=W.a.img(r||(r=Object(F.a)(["\n    height: 50px;\n    width: auto;\n"]))),U=function(e){var t=e.src;return Object(p.jsx)(B,{src:t})},X=[{title:"Stocks List",href:"/stocks"}],z=[{label:"About",onClick:function(){return window.alert("Nike coding challenge")}}],J=["NKE","NIO","MRK","WFC","SQ","DIS","AAPL","TSLA","MSFT","AMZN"],V=[{Header:"",accessor:"logo",Cell:function(e){var t=e.value;return Object(p.jsx)(U,{src:t})}},{Header:"Symbol",accessor:"symbol"},{Header:"Open",accessor:"iexOpen"},{Header:"Close",accessor:"iexClose"},{Header:"Price",accessor:"latestPrice"}],q=["logo","symbol","iexOpen","iexClose","latestPrice"],Q=["high","low","close","volume","change","peRatio","week52High","week52Low"],Y=function(){return X.map((function(e){var t=e.title,n=e.href;return Object(p.jsx)(I.a,{children:Object(p.jsx)(M.a,{href:n,children:t})},L()("nav-tab_"))}))},Z=function(){return Object(p.jsx)(H.a,{className:"mr-auto",navbar:!0,children:Object(p.jsx)(Y,{})})},G=n(260),$=n(270),ee=n(269),te=n(271),ne=function(e){return e.items.map((function(e){var t=e.label,n=e.onClick;return Object(p.jsx)(G.a,{onClick:n,children:t},L()("nav-dropdown-item_"))}))},re=function(e){var t=e.items,n=void 0===t?z:t,r=e.label,a=void 0===r?"Menu":r;return Object(p.jsx)(H.a,{navbar:!0,children:Object(p.jsxs)($.a,{nav:!0,inNavbar:!0,children:[Object(p.jsx)(ee.a,{nav:!0,caret:!0,children:a}),Object(p.jsx)(te.a,{right:!0,children:Object(p.jsx)(ne,{items:n})})]})})},ae=(Object({NODE_ENV:"production",PUBLIC_URL:"/stonks",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEBSITE_NAME:"Stonks",REACT_APP_API_TOKEN:"pk_3446db7c17144d1bbc8e8b207f195b9e",REACT_APP_API_SECRET:"sk_6384dff61cdc4b70a98df85bd0e0495d"})||!1).REACT_APP_WEBSITE_NAME,ce=function(){var e=Object(l.useState)(!1),t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(p.jsx)("header",{children:Object(p.jsxs)(P.a,{color:"light",light:!0,expand:"md",children:[Object(p.jsx)(R.a,{href:"/",children:ae}),Object(p.jsx)(D.a,{onClick:function(){return r(!n)}}),Object(p.jsxs)(N.a,{isOpen:n,navbar:!0,children:[Object(p.jsx)(Z,{}),Object(p.jsx)(re,{})]})]})})},oe=W.a.footer(a||(a=Object(F.a)(["\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 9999;\n    text-align: center;\n    padding: 1em;\n    background-color: #f8f9fa;\n"]))),ie=function(e){var t=e.label,n=void 0===t?"Stonks - \xa9 2021":t;return Object(p.jsx)(oe,{children:n})},se=n(265),ue=n(266),de=n(100),le=n(267),be=Object(W.a)(se.a)(c||(c=Object(F.a)(["\n    width: 80%;\n    margin: 0 auto;\n    padding: 1em;\n"]))),fe=function(e){var t=e.onChange,n=e.value,r=e.placeholder,a=void 0===r?"NKE":r,c=e.label,o=void 0===c?"Symbol":c,i=Object(l.useState)(""),s=Object(O.a)(i,2),u=s[0],d=s[1];return Object(p.jsxs)(be,{children:[Object(p.jsx)(ue.a,{addonType:"prepend",children:Object(p.jsx)(de.a,{children:o})}),Object(p.jsx)(le.a,{placeholder:a,onChange:t||function(e){var t=e.target.value;d(t)},value:n||u})]})},je=n(8),Oe=n.n(je),ve=n(19),he=n(101),pe=n(268),xe=n(102),ge=n.n(xe),me=n(103),we=n.n(me),Ee=(Object({NODE_ENV:"production",PUBLIC_URL:"/stonks",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEBSITE_NAME:"Stonks",REACT_APP_API_TOKEN:"pk_3446db7c17144d1bbc8e8b207f195b9e",REACT_APP_API_SECRET:"sk_6384dff61cdc4b70a98df85bd0e0495d"})||!1).REACT_APP_API_TOKEN,ye=we.a.create({baseURL:"https://cloud.iexapis.com/stable",params:{token:Ee}}),_e=function(){var e=Object(ve.a)(Oe.a.mark((function e(){return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.get("/status");case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(ve.a)(Oe.a.mark((function e(t){var n,r,a,c;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.symbol,r=void 0===n?"":n,e.prev=1,e.next=4,ye.get("/stock/".concat(r,"/quote"));case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(1),c=e.t0||{},new Error(c);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(ve.a)(Oe.a.mark((function e(t){var n,r,a,c;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.symbol,r=void 0===n?"":n,e.prev=1,e.next=4,ye.get("/stock/".concat(r,"/logo"));case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(1),c=e.t0||{},new Error(c);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(ve.a)(Oe.a.mark((function e(t){var n,r,a,c,o,i;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.symbol,r=void 0===n?"":n,a=t.range,c=void 0===a?"":a,e.prev=1,e.next=4,ye.get("/stock/".concat(r,"/chart/").concat(c));case 4:return o=e.sent,e.abrupt("return",o);case 8:throw e.prev=8,e.t0=e.catch(1),i=e.t0||{},new Error(i);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Ae=function(e){return e.headers.map((function(e){return Object(p.jsx)("th",Object(h.a)(Object(h.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))},Se=W.a.tr(o||(o=Object(F.a)(["\n    cursor: pointer;\n"]))),Pe=function(e){var t=e.rows,n=e.prepareRow,r=e.onClick;return t.map((function(e){return n(e),Object(p.jsx)(Se,Object(h.a)(Object(h.a)({},e.getRowProps()),{},{onClick:function(){return r(e.original)},children:e.cells.map((function(e){return Object(p.jsx)("td",Object(h.a)(Object(h.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))},Re=function(e){var t=e.stocks,n=Object(l.useMemo)((function(){return t.map((function(e){return ge()(e,q)}))}),[t]),r=Object(l.useMemo)((function(){return V}),[]),a=Object(he.useTable)({columns:r,data:n}),c=a.getTableProps,o=a.getTableBodyProps,i=a.rows,s=a.headers,u=a.prepareRow,d=Object(l.useContext)(w),b=Object(l.useContext)(m).symbol,f=function(){var e=Object(ve.a)(Oe.a.mark((function e(t){var n,r;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.next=3,Te({symbol:t,range:""});case 3:n=e.sent,r=(n||{}).data,d({type:"LOAD_STOCK",payload:{symbol:t,stockData:r}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(pe.a,Object(h.a)(Object(h.a)({dark:!0},c()),{},{children:[Object(p.jsx)("thead",{children:Object(p.jsx)("tr",{children:Object(p.jsx)(Ae,{headers:s})})}),Object(p.jsx)("tbody",Object(h.a)(Object(h.a)({},o()),{},{children:Object(p.jsx)(Pe,{rows:i,prepareRow:u,onClick:function(e){var t=(e||{}).symbol;b===t?d({type:"RESET_CONTEXT"}):f(t)}})}))]}))},De=n(41),Ne=n.n(De),Ie=n(21),Me=n(13),He=function(e){if(e.node()){var t=Me.i(e.node().parentNode),n=parseInt(e.style("width")),r=parseInt(e.style("height")),a=n/r,c=function(){var n=parseInt(t.style("width"));e.attr("width",n),e.attr("height",Math.round(n/a))};e.attr("viewBox","0 0 ".concat(n," ").concat(r)).attr("perserveAspectRatio","xMinYMid").call(c),Me.i(window).on("resize.".concat(t.attr("id")),c)}},Ke=function(e){var t=e.id,n=void 0===t?"":t,r=e.data,a=void 0===r?[{}]:r,c=e.xAxis,o=void 0===c?"":c,i=e.yAxis,s=void 0===i?"":i,u=e.xConvert,d=void 0===u?function(e){return e}:u,l=e.yConvert,b=void 0===l?function(e){return e}:l,f=e.colors,j=void 0===f?{price:"#4682b4",average:"#ffa500",gain:"#03a678",lose:"#c0392b"}:f,O=50,v=50,h=50,p=50,x=window.innerWidth-p-v,g=window.innerHeight-O-h,m=Me.f(a,(function(e){return d(e[o])})),w=Me.e(a,(function(e){return d(e[o])})),E=Me.f(a,(function(e){return b(e[s])})),y=Me.e(a,(function(e){return b(e[s])})),_=Me.h().domain([m,w]).range([0,x]),k=Me.g().domain([E-5,y]).range([g,0]),C=Me.d().x((function(e){return _(d(e[o]))})).y((function(e){return k(b(e[s]))})),T=function(e,t){return e.map((function(e,n,r){var a=Math.max(0,n-t),c=r.slice(a,n+1),o=c.reduce((function(e,t){return e+t.close}),0);return{date:new Date(e.date),average:o/c.length}}))}(a,49),A=Me.d().x((function(e){return _(d(e[o]))})).y((function(e){return k(b(e.average))})).curve(Me.c),S=a.filter((function(e){return e.volume})),P=Me.f(S,(function(e){return Math.min(e.volume)})),R=Me.e(S,(function(e){return Math.max(e.volume)})),D=Me.g().domain([P,R]).range([g,0]);setTimeout((function(){!function(e){Me.i(e).select("svg").remove()}(n),function(){var e=Me.i(n).append("svg").attr("width",x+p+v).attr("height",g+O+h).call(He).append("g").attr("transform","translate(".concat(p,",  ").concat(O,")"));e.append("g").attr("id","xAxis").attr("transform","translate(0, ".concat(g,")")).call(Me.a(_)),e.append("g").attr("id","yAxis").attr("transform","translate(".concat(x,", 0)")).call(Me.b(k)),e.append("path").data([a]).style("fill","none").attr("id","priceChart").attr("stroke",j.price).attr("stroke-width","1.5").attr("d",C),e.append("path").data([T]).style("fill","none").attr("id","movingAverageLine").attr("stroke",j.average).attr("d",A),e.selectAll().data(S).enter().append("rect").attr("x",(function(e){return _(d(e[o]))})).attr("y",(function(e){return D(e.volume)})).attr("fill",(function(e,t){return t&&S[t-1].close>e.close?j.lose:j.gain})).attr("width",1).attr("height",(function(e){return g-D(e.volume)}))}()}),420)},Le=n(104),Fe=W.a.div(i||(i=Object(F.a)(["\n    line-height: 2;\n    margin-left: 2em;\n    font-weight: 500;\n"]))),We=W.a.div(s||(s=Object(F.a)(["\n    background: #f9f9f9;\n    color: #121212;\n    width: 100%;\n"]))),Be=function(e){var t=e.info,n=void 0===t?[]:t,r=e.allowed,a=void 0===r?Q:r;return Object(p.jsxs)(We,{children:[Object(p.jsx)(v.a,{color:"info",children:"-- Additional Information --"}),a.map((function(e){return n[e]&&Object(p.jsx)(Fe,{children:"\u21f0 ".concat(e," = ").concat(n[e].toFixed(2))},L()("average-info_"))})),Object(p.jsx)("hr",{})]})},Ue=W.a.div(u||(u=Object(F.a)(["\n    padding: 1em;\n"]))),Xe=W.a.div(d||(d=Object(F.a)(["\n    background: #121212;\n    color: #f9f9f9;\n"]))),ze=function(){var e=Object(l.useContext)(m),t=e.symbol,n=e.stockData;!function(e){var t=e.data,n=e.xAxis,r=void 0===n?"date":n,a=e.yAxis,c=void 0===a?"close":a,o=e.id,i=void 0===o?"#chart":o;Object(l.useMemo)((function(){return Ke({id:i,data:t,xAxis:r,yAxis:c,xConvert:function(e){return new Date(e)}})}),[t,i,r,c])}({data:n});var r=function(e){return Ne()(e)?[{}]:Array.from(e.reduce((function(e,t){return Object.keys(t).reduce((function(e,n){return"number"==typeof t[n]?e.set(n,(e.get(n)||[]).concat(t[n])):e}),e)}),new Map)).reduce((function(e,t){var n=Object(O.a)(t,2),r=n[0],a=n[1];return Object.assign(e,Object(Ie.a)({},r,a.reduce((function(e,t){return e+t}))/a.length))}),{})}(n);return!t||Ne()(n)?null:Object(p.jsxs)(Ue,{children:[Object(p.jsx)(Xe,{id:"chart"}),Object(p.jsx)(Be,{info:r})]})},Je=function(){var e=function(){var e=Object(l.useState)(!1),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(l.useState)([]),c=Object(O.a)(a,2),o=c[0],i=c[1];return Object(l.useEffect)((function(){var e=_e();r(e)}),[r]),Object(l.useEffect)((function(){var e=function(){var e=Object(ve.a)(Oe.a.mark((function e(t){var n,r,a,c,o,s,u;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.symbol,e.next=3,ke({symbol:n});case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return r=e.t0,a=r.data,e.next=10,Ce({symbol:n});case 10:if(e.t1=e.sent,e.t1){e.next=13;break}e.t1={};case 13:c=e.t1,o=c.data,s=(o||{}).url,u=Object(h.a)(Object(h.a)({},a),{},{logo:s}),i((function(e){return[].concat(Object(Le.a)(e),[u])}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n&&function(){var t=Object(ve.a)(Oe.a.mark((function t(){var n;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=0;n<J.length;n+=1)e({symbol:J[n]});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[n]),[o,n]}(),t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(p.jsxs)(S,{children:[Object(p.jsx)(ce,{}),Object(p.jsx)(fe,{}),!r&&Object(p.jsx)(v.a,{color:"warning",children:"Failed to fetch stocks list - try next month?"}),Object(p.jsx)(ze,{}),Object(p.jsx)(Re,{stocks:n}),Object(p.jsx)(ie,{})]})},Ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,273)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};j.a.render(Object(p.jsx)(b.a.StrictMode,{children:Object(p.jsx)(Je,{})}),document.getElementById("root")),Ve()}},[[256,1,2]]]);
//# sourceMappingURL=main.02d4e053.chunk.js.map